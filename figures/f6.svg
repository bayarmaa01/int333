<svg viewBox="0 0 900 1800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .header { fill: #2C3E50; }
      .header-text { fill: white; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle; }
      .stage-box { fill: #3498DB; stroke: #2C3E50; stroke-width: 2; }
      .stage-title { fill: white; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }
      .stage-detail { fill: #2C3E50; font-family: Arial, sans-serif; font-size: 11px; }
      .arrow-line { stroke: #34495E; stroke-width: 3; fill: none; marker-end: url(#arrowhead); }
      .duration { fill: #E74C3C; font-family: Arial, sans-serif; font-size: 10px; font-style: italic; }
      .post-action-box { fill: #95A5A6; stroke: #2C3E50; stroke-width: 2; }
      .post-text { fill: #2C3E50; font-family: Arial, sans-serif; font-size: 11px; }
      .total-time { fill: #27AE60; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495E" />
    </marker>
  </defs>
  
  <!-- Header -->
  <rect x="50" y="20" width="800" height="50" class="header" rx="5"/>
  <text x="450" y="52" class="header-text">JENKINS CI/CD PIPELINE</text>
  
  <!-- Stage 1: Cleanup -->
  <rect x="100" y="100" width="700" height="80" class="stage-box" rx="5"/>
  <text x="120" y="125" class="stage-title">Stage 1: Cleanup Workspace</text>
  <text x="120" y="145" class="stage-detail">• Remove old files</text>
  <text x="120" y="160" class="stage-detail">• Clean working directory</text>
  <text x="120" y="175" class="duration">Duration: ~5 seconds</text>
  
  <line x1="450" y1="180" x2="450" y2="210" class="arrow-line"/>
  
  <!-- Stage 2: Checkout -->
  <rect x="100" y="210" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="235" class="stage-title">Stage 2: Checkout Code</text>
  <text x="120" y="255" class="stage-detail">• Clone from GitHub</text>
  <text x="120" y="270" class="stage-detail">• Fetch main branch</text>
  <text x="120" y="285" class="stage-detail">• Verify commit hash</text>
  <text x="120" y="300" class="duration">Duration: ~10 seconds</text>
  
  <line x1="450" y1="305" x2="450" y2="335" class="arrow-line"/>
  
  <!-- Stage 3: Build -->
  <rect x="100" y="335" width="700" height="110" class="stage-box" rx="5"/>
  <text x="120" y="360" class="stage-title">Stage 3: Build with Maven</text>
  <text x="120" y="380" class="stage-detail">• mvn clean package</text>
  <text x="120" y="395" class="stage-detail">• Compile Java source</text>
  <text x="120" y="410" class="stage-detail">• Resolve dependencies</text>
  <text x="120" y="425" class="stage-detail">• Create WAR file</text>
  <text x="120" y="440" class="duration">Duration: ~3 minutes</text>
  
  <line x1="450" y1="445" x2="450" y2="475" class="arrow-line"/>
  
  <!-- Stage 4: Tests -->
  <rect x="100" y="475" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="500" class="stage-title">Stage 4: Run Tests</text>
  <text x="120" y="520" class="stage-detail">• Execute JUnit tests</text>
  <text x="120" y="535" class="stage-detail">• Generate test report</text>
  <text x="120" y="550" class="stage-detail">• Fail on test failures</text>
  <text x="120" y="565" class="duration">Duration: ~1 minute</text>
  
  <line x1="450" y1="570" x2="450" y2="600" class="arrow-line"/>
  
  <!-- Stage 5: Docker Build -->
  <rect x="100" y="600" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="625" class="stage-title">Stage 5: Build Docker Image</text>
  <text x="120" y="645" class="stage-detail">• docker-compose build</text>
  <text x="120" y="660" class="stage-detail">• Optimize layers</text>
  <text x="120" y="675" class="stage-detail">• Tag with build number</text>
  <text x="120" y="690" class="duration">Duration: ~2 minutes</text>
  
  <line x1="450" y1="695" x2="450" y2="725" class="arrow-line"/>
  
  <!-- Stage 6: Stop Container -->
  <rect x="100" y="725" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="750" class="stage-title">Stage 6: Stop Old Container</text>
  <text x="120" y="770" class="stage-detail">• Graceful shutdown</text>
  <text x="120" y="785" class="stage-detail">• Remove old container</text>
  <text x="120" y="800" class="stage-detail">• Free resources</text>
  <text x="120" y="815" class="duration">Duration: ~10 seconds</text>
  
  <line x1="450" y1="820" x2="450" y2="850" class="arrow-line"/>
  
  <!-- Stage 7: Deploy -->
  <rect x="100" y="850" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="875" class="stage-title">Stage 7: Deploy Full Stack</text>
  <text x="120" y="895" class="stage-detail">• docker-compose up -d</text>
  <text x="120" y="910" class="stage-detail">• Start all services</text>
  <text x="120" y="925" class="stage-detail">• Configure networking</text>
  <text x="120" y="940" class="duration">Duration: ~30 seconds</text>
  
  <line x1="450" y1="945" x2="450" y2="975" class="arrow-line"/>
  
  <!-- Stage 8: Wait -->
  <rect x="100" y="975" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="1000" class="stage-title">Stage 8: Wait for Services</text>
  <text x="120" y="1020" class="stage-detail">• Sleep 30 seconds</text>
  <text x="120" y="1035" class="stage-detail">• Allow containers to initialize</text>
  <text x="120" y="1050" class="stage-detail">• Services warmup period</text>
  <text x="120" y="1065" class="duration">Duration: 30 seconds</text>
  
  <line x1="450" y1="1070" x2="450" y2="1100" class="arrow-line"/>
  
  <!-- Stage 9: Health Check -->
  <rect x="100" y="1100" width="700" height="110" class="stage-box" rx="5"/>
  <text x="120" y="1125" class="stage-title">Stage 9: Health Check</text>
  <text x="120" y="1145" class="stage-detail">• HTTP GET /learning-platform/</text>
  <text x="120" y="1160" class="stage-detail">• Retry up to 10 times</text>
  <text x="120" y="1175" class="stage-detail">• 5-second intervals</text>
  <text x="120" y="1190" class="stage-detail">• Fail → Rollback</text>
  <text x="120" y="1205" class="duration">Duration: ~15-50 seconds</text>
  
  <line x1="450" y1="1210" x2="450" y2="1240" class="arrow-line"/>
  
  <!-- Stage 10: Verify Monitoring -->
  <rect x="100" y="1240" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="1265" class="stage-title">Stage 10: Verify Monitoring Stack</text>
  <text x="120" y="1285" class="stage-detail">• Check Prometheus health</text>
  <text x="120" y="1300" class="stage-detail">• Check Grafana health</text>
  <text x="120" y="1315" class="stage-detail">• Verify all containers</text>
  <text x="120" y="1330" class="duration">Duration: ~10 seconds</text>
  
  <line x1="450" y1="1335" x2="450" y2="1365" class="arrow-line"/>
  
  <!-- Stage 11: Display URLs -->
  <rect x="100" y="1365" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="1390" class="stage-title">Stage 11: Display Access URLs</text>
  <text x="120" y="1410" class="stage-detail">• Get public IP</text>
  <text x="120" y="1425" class="stage-detail">• Print access URLs</text>
  <text x="120" y="1440" class="stage-detail">• Display credentials</text>
  <text x="120" y="1455" class="duration">Duration: ~5 seconds</text>
  
  <line x1="450" y1="1460" x2="450" y2="1490" class="arrow-line"/>
  
  <!-- Stage 12: Cleanup -->
  <rect x="100" y="1490" width="700" height="95" class="stage-box" rx="5"/>
  <text x="120" y="1515" class="stage-title">Stage 12: Cleanup Old Images</text>
  <text x="120" y="1535" class="stage-detail">• docker image prune -f</text>
  <text x="120" y="1550" class="stage-detail">• Remove dangling images</text>
  <text x="120" y="1565" class="stage-detail">• Free disk space</text>
  <text x="120" y="1580" class="duration">Duration: ~5 seconds</text>
  
  <!-- Total Time -->
  <rect x="100" y="1610" width="700" height="30" fill="#27AE60" rx="5"/>
  <text x="450" y="1632" class="total-time" text-anchor="middle">Total Pipeline Duration: 8-12 minutes</text>
  
  <!-- Post-Build Actions -->
  <rect x="100" y="1660" width="700" height="110" class="post-action-box" rx="5"/>
  <text x="120" y="1685" class="stage-title" fill="white">Post-Build Actions:</text>
  <text x="120" y="1710" class="post-text">• Success: Display container status, send notification</text>
  <text x="120" y="1730" class="post-text">• Failure: Rollback deployment, alert team</text>
  <text x="120" y="1750" class="post-text">• Always: Log timestamp, archive artifacts</text>
</svg>